<label [for]="controlKey">{{ label }}</label>
<div class="flex flex-col justify-center items-start max-w-80">
  <div class="border-gray-200 border-2 rounded-xl p-2 aspect-square flex flex-col">

    <div class="flex items-center gap-2 mb-2 shrink-0">
      <!-- Display selected file identifier or thumbnail -->
      <label>{{getDisplayValue(parentFormGroup.get(controlKey)?.value)}}</label>
    </div>

    <!-- Optional: show thumbnail if value is a file path -->
    @if (previewUrl$ | async; as imagePreviewUrl) {
    <div class="flex-1 flex items-center justify-center overflow-hidden relative group">
      <!-- Image -->
      <img [src]="imagePreviewUrl" alt="Selected photo" class="object-cover w-full h-full rounded-xl" />

      <!-- Dark overlay covering whole image -->
      <div
        class="absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity rounded-xl cursor-pointer"
        (click)="menu.toggle($event)">
        <i class="pi pi-pencil text-white text-2xl"></i>
      </div>
    </div>
    }
    @else {
    <button type="button" pButton icon="pi pi-plus"
      class="p-button-text p-button-secondary flex-1 flex items-center justify-center w-full"
      (click)="menu.toggle($event)">
    </button>
    }

    <p-menu #menu [model]="menuItems" [popup]="true"></p-menu>


  </div>
</div>