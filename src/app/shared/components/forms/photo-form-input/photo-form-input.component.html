<div class="flex flex-col gap-1">
  <label [for]="controlKey">{{ label }}</label>

  <div class="flex items-center gap-2">
    <!-- Display selected file identifier or thumbnail -->
    <input
      type="text"
      [id]="controlKey"
      [formControlName]="controlKey"
      class="border-gray-300 rounded p-1 flex-1"
      readonly
      placeholder="No photo selected"
    />

    <!-- Open upload modal -->
    <button
      type="button"
      pButton
      class="px-2 py-1 border rounded bg-blue-500 text-white"
      (click)="openUploadModal()"
    >
      New
    </button>

    <!-- Open selection modal -->
    <button
      type="button"
      pButton
      class="px-2 py-1 border rounded bg-gray-200 text-black"
      (click)="openSelectionModal()"
    >
      Existing
    </button>
  </div>

  <!-- Optional: show thumbnail if value is a file path -->
  <div class="mt-2">
    <img
      [src]="previewUrl$ | async"
      alt="Selected photo"
      class="w-24 h-24 object-cover border rounded"
    />
  </div>
</div>
