<div>
    @if (model$ | async; as model) {
        <div class="flex">
            <div class="shrink mr-2">
                <button pButton icon="pi pi-angle-left" class="p-button-text p-button-secondary p-button-sm" routerLink="../.."></button>
            </div>
            <header class="grow flex justify-between">
                <div>
                
                @if (values$ | async; as entry) {
                    
                    @if (entryId && entryId !== 'new') {
                        @if (getEntryTitleId(model); as entryTitleId) {
                            <h2>Editing: {{entry[entryTitleId]}}</h2>
                        }
                        @else {
                            <h2>Editing: {{entryId}}</h2>
                        }
                    }
                    @else {
                        <h2>Creating new {{model.name}}</h2>
                    }
                }
                </div>
            </header>
        </div>
        <form [formGroup]="form" class="mx-10">
            <div class="flex flex-col gap-8">
                @for (field of model.fields; track $index) {
                    @switch (field.type) {
                        @case (types.Boolean) {
                            <app-checkbox-form-input [controlKey]="field.id" [label]="field.name"/>
                        }
                        @case (types.Number) {
                            <app-number-form-input [controlKey]="field.id" [label]="field.name"/>
                        }
                        @case (types.Text) {
                            <app-short-text-form-input [controlKey]="field.id" [label]="field.name"/>
                        }
                        @case (types.Photo) {
                            <app-photo-form-input [controlKey]="field.id" [label]="field.name"/>
                        }
                    }
                }
            </div>
            <div class="flex justify-end">
                    <button pButton (click)="OnSave()">
                        Save
                    </button>
                </div>
        </form>
    }
</div>
